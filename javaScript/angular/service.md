# 서비스와 의존성 주입

컴포넌트는 화면을 구성하는 뷰를 생성하고 관리하는 것이 주된 역할이지만, 부가적인 기능도 필요하게 된다. 컴포넌트가 주 관심사인 뷰를 생성, 관리하는 역할에만 집중할 수 있도록 서비스로 분리하여 작성

클래스의 인스턴스를 만들 때 new 키워드 외에도 방법이 있음

- single turn : 인스턴스를 하나만 만들어서 그 인스턴스의 참조를 가져다 메소드를 사용함(단, 프레임워크가 인스턴스를 관리하고 있어야함)

- factory : 인스턴스의 생성이 복잡한 과정으로 이뤄지는 경우 인스턴스를 대신 생성해주는 역할

tight coupling : A 클래스가 B클래스의 인스턴스 생성방법을 알고 있는 경우, B클래스의 코드가 변경되면 영향을 많이 받음.

-> angular는 느슨한 결합을 추구함. 코드 변경을 최소화.

A 클래스가 B 클래스에 의존성 주입을 받고자 한다면 컨스트럭터 내부에서 생성하지 않고, A 클래스의 컨스트럭터의 매개변수로 의존성 주입을 요청하는 방식으로 만들어 줌.

@Injectable 데코레이터 내부에 providedIn: 'root'로 설정하면, 프레임워크가 B 클래스를 한번만 생성하여 이를 의존성 주입을 요청한 다른 클래스에 인수로 넣어줌

>전역 의존성 주입이 가능한 인스턴스가 생성됨.

## 서비스 중재자 패턴

원래 컴포넌트 간의 상태정보 교환은 원거리일 경우 연결된 전체 프로퍼티에 정보를 전달하는 과정을 거쳐 복잡해짐.

서비스를 이용하면 원거리에 있는 컴포넌트 당사자끼리 서비스를 바라보며, 상태정보를 교환하게 함